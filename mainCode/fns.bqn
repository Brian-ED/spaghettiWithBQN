_While_ â‡{ğ”½âŸğ”¾âˆ˜ğ”½_ğ•£_ğ”¾âˆ˜ğ”½âŸğ”¾ğ•©}
ToInt â‡10âŠ¸Ã—âŠ¸+ËœÂ´âˆ˜âŒ½-âŸœ'0'
StartsWith â‡ â‰¤â—‹â‰ â—¶0â€¿(âŠ£â‰¡â‰ âŠ¸â†‘)Ëœ
Print â‡âŠ¢âŠ£  (â€¢pathâˆ¾"/../out.txt") â€¢FChars â€¢Repr
IsString â‡{1==ğ•©?âˆ§Â´2=â€¢TypeÂ¨ğ•©;0}
ToPyTuple â‡{'['âˆ¾']'Â«âˆ¾1âŒ½Â¨""","""âŠ¸âˆ¾âŸœâˆ¾Â¨"\"""âŠ¸(âŠ‘âŠ)â—¶"\\"â€¿"\"""â€¿â¥ŠÂ¨Â¨ğ•©}
PrefixedInteger â†âŠ¢(âŠ¢âˆ¾âŸœToInt 1â†“â†‘Ëœ)1+âŸœ(+Â´âˆ§`)1â†“âˆŠâŸœ('0'+â†•10)

CollapseInts â†{
    # âŸ¨ 's' âŸ¨ 3 3 3 âŸ© 's' 's' âŸ¨ 2 âŸ© 'n' 'n' 'n' 'n' âŸ© â‰¡ CollapseInts "sl3 3 3ssl2nnnn"
    # TODO can be massively simplified
    ğ•Š doneâ€¿types:
        'l'â‰¡âŠ‘types?
        lenOfArgâ€¿listLenâ†PrefixedInteger types
        âŒ½âŒ¾(âŠ‘âŒ½âˆ˜âŠ‘){ ğ•Š doneâ€¿types:
            lenOfArgâ€¿listLenâ†PrefixedInteger types
            âŸ¨listLenâŠ¸âˆ¾âŒ¾(âŠ‘âŒ½)done ,lenOfArgâ†“typesâŸ©
        } _While_ {' 'â‰¡âŠ‘1âŠ‘ğ•©}âŸ(0=âŸœâ‰ 1âŸœâŠ‘) Print âŸ¨doneâˆ¾âŸ¨âŸ¨listLenâŸ©âŸ©,lenOfArgâ†“typesâŸ©;
    ğ•Š doneâ€¿types:
        (1âŠ¸â†“â‹ˆËœdoneâˆ¾âŠ‘)types
}_While_(""â‰¢âŠ‘âˆ˜âŒ½)

# TODO add .run so you can use python function in bqn
PyFuncStructâ‡{
    reprâ‡ğ•©
}

GroupTypesâ†{
    ğ•Š argsâ€¿doneâ€¿types:
        0â‰¡â€¢Type âŠ‘types?
            âŸ¨args
            done (<âˆ˜â¥Šâˆ¾Ã—Â´âŠ¸â†“)Ëœ âŠ‘types
            1â†“typesâŸ©;

    ğ•Š argsâ€¿doneâ€¿types:
        âŸ¨1â†“args
        done âˆ¾Ëœ args {ğ•ğ•¨}â—‹âŠ‘ ToIntâ€¿<â€¿âŠ¢â€¿â€¢BQNâ€¿ PyFuncStruct/Ëœ"nscfF"=âŠ‘types
        1â†“typesâŸ©
}_While_(""â‰¢âŠ‘âˆ˜âŒ½)

ExtractTypes â†{
  IsString ğ•©? 's';
  0=â€¢Type ğ•©?
    âˆ¾Â´('l'Â»Â«""âˆ¾Â´' 'âˆ¾Â¨â€¢ReprÂ¨â‰¢ğ•©)âˆ¾âˆ¾Â´ğ•ŠÂ¨â¥Šğ•©;
  "ncf"âŠ‘Ëœ2âŒŠÂ¯1+â€¢Type ğ•©
}

Crunchâ†{
  xâ†âŸ¨âŸ©
  IsStringâ—¶{
    xâˆ¾â†©â€¢ReprâŸ(2â‰ â€¢Type)Â¨â¥Šğ•©
  }â€¿{
    xâˆ¾â†©<ğ•©
  }âš‡1ğ•©
  x
}

IntoMediary â‡{
  ğ•Š: (ExtractTypes <âŠ¸âˆ¾ Crunch) ğ•©;
  ğ•Šâ¼:
    types â†âŠ‘ğ•©
    args â†1â†“ğ•©

    intStrTypes â†âŠ‘ CollapseInts âŸ¨âŸ©â€¿types

    >1âŠ‘ GroupTypes âŒ½Â¨argsâ€¿âŸ¨âŸ©â€¿intStrTypes
}

{ğ•Š:
â€¢Show â€¢ShowâŒ¾IntoMediary â€¢ShowâŸ¨"helllo",âŸ¨1,2,3,âŸ¨'a',"boo"âŸ©,4âŸ©âŸ©
}âŸ0@ #testing on or off

FileExistsâ†âŠ¢âŠ£"Couldn't find python file to run"!â€¢file.Exists

Communicationâ‡{
 âˆ§Â´ğ•©âˆŠ"_"âˆ¾â¥Š"aA"+âŒœâ†•26?

  commPathâ‡"communication/"âˆ¾ğ•©
  â€¢file.Existsâ—¶âŸ¨
    â€¢file.CreateDir
    â€¢file.RemoveÂ¨<âˆ˜âˆ¾âŸœ'/'âˆ¾Â¨â€¢file.List
  âŸ©commPath
  â€¢SH "Python3" â‹ˆ FileExistsğ•¨

  SendMsg â‡ {
    ğ•Šmsg:
      pathâ†commPathâˆ¾"/msgFromBQN"âˆ¾(â€¢Reprâ‰ â€¢file.List commPath)âˆ¾".txt"
      path â€¢FChars ToPyTuple IntoMediary msg;
    ğ•Šâ¼:
      GetMsg 1
  }

  noMsgErrorâ†"No msg found. Please âŠ if expected, or 'GetMsg 1' to wait for msg"
  GetMsg â‡{
    waitâ†1â‰¡ğ•©
    FindFileâ†"msgFromPy"âŠ¸(âŠ£â‰¡â‰ âŠ¸â†‘)Â¨â€¢file.List
    mâ†FindFile _while_{â€¢Delay 0.2,Â¬âˆ¨Â´ğ•©}âŸwait FindFile commPath
    noMsgError!âˆ¨Â´m
    fileâ†âŠ‘âˆ§m/â€¢file.List commPath
    (â€¢file.RemoveâŠ¢IntoMediaryâ¼âˆ˜â€¢FChars) file
  }
}